{
  "kind": "coverage_report",
  "version": "1.0",
  "generatedAt": "2026-02-07T12:14:14.206Z",
  "sources": {
    "buildRequest": true,
    "implementationPlan": true
  },
  "requirements": {
    "total": 6,
    "implemented": 3,
    "items": [
      {
        "id": "REQ-91",
        "summary": "Extend the backend Room/Game data model to include an admin/scorer token (e.g., `adminToken : Text`) generated by the backend when creating a room (and, if needed, when creating a game). The token must be treated as a secret and must not be derivable from the room code.",
        "status": "unknown",
        "plannedFiles": [],
        "matchedFiles": []
      },
      {
        "id": "REQ-92",
        "summary": "Update backend state-mutating methods so they require an admin token to be provided and validated. Any method that modifies backend state must enforce the equivalent of requiring HTTP header `X-ADMIN-TOKEN` by accepting a token parameter (since canister calls do not provide HTTP headers) and rejecting the call with a structured, non-trapping error when the token is missing/invalid.",
        "status": "unknown",
        "plannedFiles": [],
        "matchedFiles": []
      },
      {
        "id": "REQ-93",
        "summary": "Ensure TV/display read-only flows do not require any token and continue to work using only the room code/game identifier (including realtime subscription).",
        "status": "missing",
        "plannedFiles": [
          "frontend/src/pages/RoomDisplayTvPage.tsx",
          "frontend/src/hooks/useGameRealtime.ts"
        ],
        "matchedFiles": []
      },
      {
        "id": "REQ-94",
        "summary": "Update the frontend multi-device Create Room flow to capture and persist the returned scorer/admin token for the created room (e.g., in localStorage keyed by room code) and use it automatically for Host / Scorer actions on that device.",
        "status": "implemented",
        "plannedFiles": [
          "frontend/src/lib/adminTokenStorage.ts",
          "frontend/src/lib/roomsApi.ts",
          "frontend/src/pages/StartGamePage.tsx",
          "frontend/src/pages/RoomHostScorerPage.tsx"
        ],
        "matchedFiles": [
          "frontend/src/lib/adminTokenStorage.ts",
          "frontend/src/lib/roomsApi.ts",
          "frontend/src/pages/StartGamePage.tsx",
          "frontend/src/pages/RoomHostScorerPage.tsx"
        ]
      },
      {
        "id": "REQ-95",
        "summary": "Add a minimal frontend UI for the Host / Scorer role to handle scorer/admin tokens across devices: allow the user to enter a scorer token when joining a room (or when opening Host / Scorer without a saved token), persist it locally for that room code, and clearly show an English error state when the token is invalid.",
        "status": "implemented",
        "plannedFiles": [
          "frontend/src/pages/StartGamePage.tsx",
          "frontend/src/pages/RoomHostScorerPage.tsx",
          "frontend/src/components/rooms/HostLiveScoringPanel.tsx"
        ],
        "matchedFiles": [
          "frontend/src/pages/StartGamePage.tsx",
          "frontend/src/pages/RoomHostScorerPage.tsx",
          "frontend/src/components/rooms/HostLiveScoringPanel.tsx"
        ]
      },
      {
        "id": "REQ-96",
        "summary": "Plumb the admin token through existing frontend API helper functions used by the Host / Scorer screen (e.g., functions in `frontend/src/lib/roomGameApi.ts` and `frontend/src/lib/roomsApi.ts`) so that all state-mutating actor calls include the token parameter, while read-only calls remain unchanged.",
        "status": "implemented",
        "plannedFiles": [
          "frontend/src/lib/roomGameApi.ts",
          "frontend/src/pages/RoomHostScorerPage.tsx",
          "frontend/src/components/rooms/HostLiveScoringPanel.tsx",
          "frontend/src/lib/roomsApi.ts"
        ],
        "matchedFiles": [
          "frontend/src/lib/roomGameApi.ts",
          "frontend/src/pages/RoomHostScorerPage.tsx",
          "frontend/src/components/rooms/HostLiveScoringPanel.tsx",
          "frontend/src/lib/roomsApi.ts"
        ]
      }
    ]
  },
  "changedFiles": [
    "backend/main.mo",
    "backend/migration.mo",
    "build-request.json",
    "feature_evidence.json",
    "frontend-file-summaries.txt",
    "frontend-implementation-plan.json",
    "frontend/src/backend.d.ts",
    "frontend/src/backend.ts",
    "frontend/src/components/rooms/HostLiveScoringPanel.tsx",
    "frontend/src/declarations/backend.did.d.ts",
    "frontend/src/declarations/backend.did.js",
    "frontend/src/lib/adminTokenStorage.ts",
    "frontend/src/lib/roomGameApi.ts",
    "frontend/src/lib/roomsApi.ts",
    "frontend/src/pages/RoomHostScorerPage.tsx",
    "frontend/src/pages/StartGamePage.tsx",
    "project_state.json",
    "scratch/component-selection.json",
    "spec.md",
    "spec_vs_diff_report.json"
  ]
}
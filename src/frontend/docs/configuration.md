# Configuration Guide

This document describes all configuration values used by the Dart Scoring application, where they are set, and their default values.

## Overview

The Dart Scoring application is designed to run on the Internet Computer (IC) platform with **zero external dependencies**. No Docker, Postgres, or external databases are required. All configuration is managed through:

- **Frontend:** Vite build-time environment variables
- **Backend:** Canister initialization arguments and stable memory
- **Infrastructure:** dfx.json canister settings

## Frontend Configuration

### Build-Time Configuration

The frontend uses Vite's environment variable system for build-time configuration. These values are embedded into the built application.

#### Canister Connection

**Location:** `frontend/src/config.ts` (auto-generated by dfx)

The frontend automatically resolves backend canister connection details through the `createActorWithConfig` function, which:

1. Reads canister IDs from `canister_ids.json` (generated by dfx)
2. Determines the appropriate IC host:
   - **Local development:** `http://127.0.0.1:4943`
   - **Production (IC mainnet):** `https://ic0.app`
3. Creates an authenticated or anonymous actor based on Internet Identity state

**Configuration Values:**

| Variable | Description | Default | Set By |
|----------|-------------|---------|--------|
| `CANISTER_ID_BACKEND` | Backend canister ID | Auto-generated | dfx |
| `CANISTER_ID_FRONTEND` | Frontend canister ID | Auto-generated | dfx |
| `DFX_NETWORK` | Target network (local/ic) | `local` | dfx |
| `IC_HOST` | IC replica/boundary node URL | `http://127.0.0.1:4943` (local)<br>`https://ic0.app` (mainnet) | dfx |

**How to Override (Advanced):**

For custom IC hosts or testing, you can modify the `createActorWithConfig` function in `frontend/src/config.ts` after generation.

#### Same-Origin API Architecture

**Location:** All backend endpoints are served under `/api/*` on the same origin

The application uses a same-origin architecture where all backend API endpoints (including Google OAuth) are accessible at `/api/*` paths on the same domain as the frontend. This eliminates the need for separate backend domain configuration.

**Key Endpoints:**

| Endpoint | Description | Expected Response |
|----------|-------------|-------------------|
| `/api/health` | Health check endpoint | HTTP 200 with "OK" status |
| `/api/auth/google/start` | Google OAuth initiation | HTTP 302/303 redirect to Google |
| `/api/auth/google/callback` | Google OAuth callback | Processes OAuth code and redirects |

**Behavior:**

- **Google Sign-In:** Clicking "Continue with Google" on the login page performs a full-page redirect to `/api/auth/google/start`, initiating the Google OAuth flow
- **No External Configuration Required:** The frontend automatically uses same-origin `/api` paths for all backend communication
- **Development Proxy:** In local development, Vite proxies `/api/*` requests to the local dfx replica (configured in `vite.config.ts`)

**How It Works:**

##### Local Development

The Vite dev server (configured in `frontend/vite.config.ts`) automatically proxies `/api/*` requests to the local dfx replica:

